import { describe, test } from "vitest";
import { SequenceRunner } from "../framework";

export const data = (run: SequenceRunner) => {
  describe("Sword Smart-Fill", () => {
    test(`Basic Test`, async () => {
      await run(
        `
      ┌─────┬─────┬─────┬─────┬─────┬─────┐
      │     │     │     │     │ B   │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │ B   │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │ B   │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │ B   │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │ B   │     │     │
      └─────┴─────┴─────┴─────┴─────┴─────┘
    `,
        `
      ┌─────┬─────┬─────┬─────┬─────┬─────┐
      │     │.  2 │. 1  │. 1  │ B   │.  2 │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │.  2 │ B   │. 1  │. 1  │. 12 │. 1  │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │. 1  │* 2  │. 12 │ B   │. 1  │. 12 │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │. 1  │* 2  │* 2  │. 1  │  s  │  s  │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │ B   │. 12 │. 1  │  s  │  s  │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │.  2 │     │     │ B   │  s  │>S   │
      └─────┴─────┴─────┴─────┴─────┴─────┘
    `
      );
    });
    test(`Correctly smart fill based on diagonal data (3x2)`, async () => {
      await run(
        `
    ┌─────┬─────┬─────┬─────┬─────┬─────┐
    │     │     │     │     │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │ B   │     │ B   │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │ B   │     │     │ S   │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │     │     │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │ P   │     │ B   │     │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │ E   │     │     │     │ B   │
    └─────┴─────┴─────┴─────┴─────┴─────┘
  `,
        `
    ┌─────┬─────┬─────┬─────┬─────┬─────┐
    │     │     │     │     │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │ B   │     │ B   │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │ B   │  s  │  s  │ S   │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │  p  │  p  │>S   │  s  │  s  │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │ P   │  p  │ B   │     │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │ E   │     │     │     │ B   │
    └─────┴─────┴─────┴─────┴─────┴─────┘
  `
      );
    });
    test(`Correctly smart fill based on diagonal data (2x3)`, async () => {
      await run(
        `
    ┌─────┬─────┬─────┬─────┬─────┬─────┐
    │     │     │     │     │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │ B   │     │ B   │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │ B   │     │ S   │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │     │     │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │ P   │     │ B   │     │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │ E   │     │     │     │ B   │
    └─────┴─────┴─────┴─────┴─────┴─────┘
  `,
        `
    ┌─────┬─────┬─────┬─────┬─────┬─────┐
    │     │     │     │     │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │ B   │*  1 │ B   │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │ B   │     │ S   │  s  │*  1 │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │  p  │  p  │     │  s  │  s  │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │ P   │  p  │ B   │  s  │>S   │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │ E   │*  1 │*  1 │*  1 │ B   │
    └─────┴─────┴─────┴─────┴─────┴─────┘
  `
      );
    });
    test(`Correctly smart fill based on a horizontal line with one side blocked`, async () => {
      await run(
        `
    ┌─────┬─────┬─────┬─────┬─────┬─────┐
    │     │     │     │     │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │ B   │     │ B   │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │ B   │     │     │ S   │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │     │     │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │ P   │     │ B   │     │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │ E   │     │     │     │ B   │
    └─────┴─────┴─────┴─────┴─────┴─────┘
  `,
        `
    ┌─────┬─────┬─────┬─────┬─────┬─────┐
    │     │     │     │     │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │ B   │     │ B   │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │ B   │>S   │  s  │ S   │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │  p  │  p  │  s  │  s  │  s  │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │ P   │  p  │ B   │     │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │ E   │     │     │     │ B   │
    └─────┴─────┴─────┴─────┴─────┴─────┘
  `
      );
    });
    test(`Correctly smart fill based on a vertical line with one side blocked`, async () => {
      await run(
        `
    ┌─────┬─────┬─────┬─────┬─────┬─────┐
    │     │     │     │     │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │ B   │     │ B   │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │ B   │     │ S   │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │     │     │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │ P   │     │ B   │     │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │ E   │     │     │     │ B   │
    └─────┴─────┴─────┴─────┴─────┴─────┘
  `,
        `
    ┌─────┬─────┬─────┬─────┬─────┬─────┐
    │     │     │     │     │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │ B   │*  1 │ B   │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │ B   │     │ S   │  s  │*  1 │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │  p  │  p  │     │  s  │  s  │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │ P   │  p  │ B   │>S   │  s  │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │ E   │*  1 │*  1 │*  1 │ B   │
    └─────┴─────┴─────┴─────┴─────┴─────┘
  `
      );
    });
    test(`Correctly smart fill against top-left edge`, async () => {
      await run(
        `
    ┌─────┬─────┬─────┬─────┬─────┬─────┐
    │     │     │     │     │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │ B   │ B   │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │     │ P   │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │     │     │ P   │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │ B   │ B   │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │     │ B   │     │     │
    └─────┴─────┴─────┴─────┴─────┴─────┘
  `,
        `
    ┌─────┬─────┬─────┬─────┬─────┬─────┐
    │>S   │  s  │     │     │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │  s  │  s  │ B   │ B   │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │  s  │  s  │     │ P   │  p  │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │     │  p  │ P   │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │ B   │ B   │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │     │ B   │     │     │
    └─────┴─────┴─────┴─────┴─────┴─────┘
    [Warning] Blocked tile pattern does not match any known patterns; Fox suggestions are not available.
`
      );
    });
    test(`Correctly smart fill against top-right edge`, async () => {
      await run(
        `
    ┌─────┬─────┬─────┬─────┬─────┬─────┐
    │     │     │     │     │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │ B   │ B   │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │ P   │     │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │ P   │     │     │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │ B   │ B   │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │     │ B   │     │     │
    └─────┴─────┴─────┴─────┴─────┴─────┘
  `,
        `
    ┌─────┬─────┬─────┬─────┬─────┬─────┐
    │     │     │     │     │  s  │>S   │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │ B   │ B   │  s  │  s  │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │  p  │ P   │     │  s  │  s  │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │ P   │  p  │     │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │ B   │ B   │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │     │ B   │     │     │
    └─────┴─────┴─────┴─────┴─────┴─────┘
    [Warning] Blocked tile pattern does not match any known patterns; Fox suggestions are not available.
`
      );
    });
    test(`Correctly smart fill against bottom-left edge`, async () => {
      await run(
        `
    ┌─────┬─────┬─────┬─────┬─────┬─────┐
    │     │     │     │     │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │ B   │ B   │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │     │ P   │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │     │     │ P   │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │ B   │ B   │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │     │ B   │     │     │
    └─────┴─────┴─────┴─────┴─────┴─────┘
  `,
        `
    ┌─────┬─────┬─────┬─────┬─────┬─────┐
    │     │     │     │     │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │ B   │ B   │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │     │ P   │  p  │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │  s  │  s  │     │  p  │ P   │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │  s  │  s  │ B   │ B   │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │>S   │  s  │     │ B   │     │     │
    └─────┴─────┴─────┴─────┴─────┴─────┘
    [Warning] Blocked tile pattern does not match any known patterns; Fox suggestions are not available.
`
      );
    });
    test(`Correctly smart fill against bottom-right edge`, async () => {
      await run(
        `
    ┌─────┬─────┬─────┬─────┬─────┬─────┐
    │     │     │     │     │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │ B   │ B   │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │ P   │     │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │ P   │     │     │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │ B   │ B   │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │     │ B   │     │     │
    └─────┴─────┴─────┴─────┴─────┴─────┘
  `,
        `
    ┌─────┬─────┬─────┬─────┬─────┬─────┐
    │     │     │     │     │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │ B   │ B   │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │  p  │ P   │     │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │ P   │  p  │     │  s  │  s  │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │ B   │ B   │  s  │  s  │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │     │ B   │  s  │>S   │
    └─────┴─────┴─────┴─────┴─────┴─────┘
    [Warning] Blocked tile pattern does not match any known patterns; Fox suggestions are not available.
`
      );
    });
  });
};
