import { test } from "~/test/playwright/fixtures.js";

test(
  "it should have basic functionality working",
  { tag: "@smoke-test" },
  async ({ harness }) => {
    // Act & Assert
    await harness.actionsFromAsciiGrid(`
      ┌─────┬─────┬─────┬─────┬─────┬─────┐
      │     │     │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │     │     │>B1  │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │     │     │     │
      └─────┴─────┴─────┴─────┴─────┴─────┘
    `);

    await harness.assertFromAsciiGrid(`
      ID C→
      ## 15
      ┌─────┬─────┬─────┬─────┬─────┬─────┐
      │.  1 │.  1 │.11  │.11  │.  1 │.  1 │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │.  1 │  b  │.11  │.11  │  b  │.  1 │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │.111 │.11  │.111 │. 11 │. 1  │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │  b  │.111 │.111 │  b  │. 1  │. 1  │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │.111 │.11  │*1   │.11  │.111 │ B   │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │.111 │.11  │.1   │.111 │.11  │.  1 │
      └─────┴─────┴─────┴─────┴─────┴─────┘
    `);

    await harness.actionsFromAsciiGrid(`
      ┌─────┬─────┬─────┬─────┬─────┬─────┐
      │     │     │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │>S1  │     │     │     │     │     │
      └─────┴─────┴─────┴─────┴─────┴─────┘
    `);

    await harness.assertFromAsciiGrid(`
      ID C→
      ## 4
      ┌─────┬─────┬─────┬─────┬─────┬─────┐
      │.  1 │     │. 1  │. 1  │.  1 │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │  b  │* 1  │* 1  │  b  │.  1 │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │. 11 │. 1  │. 11 │. 1  │. 1  │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │  b  │. 1  │. 1  │  b  │. 1  │. 1  │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │  s  │  s  │  s  │     │.  1 │ B   │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │ S   │  s  │  s  │.  1 │     │.  1 │
      └─────┴─────┴─────┴─────┴─────┴─────┘
    `);

    await harness.actionsFromAsciiGrid(`
      ┌─────┬─────┬─────┬─────┬─────┬─────┐
      │     │     │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │>E   │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │     │     │     │
      └─────┴─────┴─────┴─────┴─────┴─────┘
    `);

    await harness.assertFromAsciiGrid(`
      ID C→
      ## 2
      ┌─────┬─────┬─────┬─────┬─────┬─────┐
      │.  1 │     │     │     │.  1 │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │  b  │ E   │     │  b  │.  1 │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │* 11 │. 1  │.  1 │. 1  │. 1  │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │  b  │. 1  │. 1  │  b  │. 1  │. 1  │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │  s  │  s  │  s  │     │.  1 │ B   │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │ S   │  s  │  s  │.  1 │     │.  1 │
      └─────┴─────┴─────┴─────┴─────┴─────┘
    `);

    await harness.actionsFromAsciiGrid(`
      ┌─────┬─────┬─────┬─────┬─────┬─────┐
      │     │     │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │>F   │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │     │     │     │
      └─────┴─────┴─────┴─────┴─────┴─────┘
    `);

    await harness.assertFromAsciiGrid(`
      ID C→
      ## 1
      ┌─────┬─────┬─────┬─────┬─────┬─────┐
      │     │     │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │  b  │ E   │     │  b  │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │ F   │     │     │  p  │  p  │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │  b  │     │     │  b  │  p  │  p  │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │  s  │  s  │  s  │     │     │ B   │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │ S   │  s  │  s  │     │     │     │
      └─────┴─────┴─────┴─────┴─────┴─────┘
    `);

    await harness.actionsFromAsciiGrid(`
      ┌─────┬─────┬─────┬─────┬─────┬─────┐
      │     │     │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │>U   │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │     │     │     │
      └─────┴─────┴─────┴─────┴─────┴─────┘
    `);

    await harness.assertFromAsciiGrid(`
      ID C→
      ## 2
      ┌─────┬─────┬─────┬─────┬─────┬─────┐
      │.  1 │     │     │     │.  1 │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │  b  │ E   │     │  b  │.  1 │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │* 11 │. 1  │.  1 │. 1  │. 1  │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │  b  │. 1  │. 1  │  b  │. 1  │. 1  │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │  s  │  s  │  s  │     │.  1 │ B   │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │ S   │  s  │  s  │.  1 │     │.  1 │
      └─────┴─────┴─────┴─────┴─────┴─────┘
    `);

    await harness.actionsFromAsciiGrid(`
      ┌─────┬─────┬─────┬─────┬─────┬─────┐
      │>E1  │     │     │     │>E4  │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │     │     │>E5  │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │>E6  │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │     │>E7  │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │>E3  │     │>E2  │
      └─────┴─────┴─────┴─────┴─────┴─────┘
    `);

    await harness.assertFromAsciiGrid(`
      ID C→
      ## 2
      ┌─────┬─────┬─────┬─────┬─────┬─────┐
      │ E   │     │     │     │ E   │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │  b  │ E   │     │  b  │ E   │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │* 11 │. 1  │ E   │. 1  │. 1  │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │  b  │. 1  │. 1  │  b  │. 1  │. 1  │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │  s  │  s  │  s  │     │ E   │ B   │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │ S   │  s  │  s  │ E   │     │ E   │
      └─────┴─────┴─────┴─────┴─────┴─────┘
    `);

    await harness.actionsFromAsciiGrid(`
      ┌─────┬─────┬─────┬─────┬─────┬─────┐
      │     │     │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │>P   │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │     │     │     │
      └─────┴─────┴─────┴─────┴─────┴─────┘
    `);

    await harness.assertFromAsciiGrid(`
      ID C→
      ## 1
      ┌─────┬─────┬─────┬─────┬─────┬─────┐
      │ E   │     │     │     │ E   │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │  b  │ E   │     │  b  │ E   │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │ P   │  p  │ E   │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │  b  │  p  │  p  │  b  │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │  s  │  s  │  s  │     │ E   │ B   │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │ S   │  s  │  s  │ E   │     │ E   │
      └─────┴─────┴─────┴─────┴─────┴─────┘
    `);

    await harness.getResetButton().click();

    await harness.assertFromAsciiGrid(`
      ## 252
      ┌─────┬─────┬─────┬─────┬─────┬─────┐
      │     │     │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │     │     │     │
      └─────┴─────┴─────┴─────┴─────┴─────┘
    `);

    await harness.getResetButton().click();

    await harness.assertFromAsciiGrid(`
      ID C→
      ## 1
      ┌─────┬─────┬─────┬─────┬─────┬─────┐
      │ E   │     │     │     │ E   │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │  b  │ E   │     │  b  │ E   │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │ P   │  p  │ E   │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │  b  │  p  │  p  │  b  │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │  s  │  s  │  s  │     │ E   │ B   │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │ S   │  s  │  s  │ E   │     │ E   │
      └─────┴─────┴─────┴─────┴─────┴─────┘
    `);
  }
);
