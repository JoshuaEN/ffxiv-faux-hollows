import { TestStructuralElements } from "../all-data-tests.js";
import { RegisterTest } from "../framework.js";

export const data = (
  registerTest: RegisterTest,
  { describe }: TestStructuralElements
) => {
  describe("Fox suggestions", () => {
    describe("Fully Solved board", () => {
      registerTest(
        `Does not suggest any foxes with no community data`,
        `
      ┌─────┬─────┬─────┬─────┬─────┬─────┐
      │     │     │     │     │ B   │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │ B   │     │ E   │ E   │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │ P   │ P   │     │ B   │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │ P   │ P   │     │ S   │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │ B   │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │ B   │     │     │
      └─────┴─────┴─────┴─────┴─────┴─────┘
    `,
        `
        ID C
        ## 0
      ┌─────┬─────┬─────┬─────┬─────┬─────┐
      │     │     │     │     │ B   │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │ B   │     │ E   │ E   │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │ P   │ P   │     │ B   │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │ P   │ P   │     │ S   │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │ B   │>S1  │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │ B   │     │     │
      └─────┴─────┴─────┴─────┴─────┴─────┘
      [Error] Tile pattern does not match any known patterns; suggestions are not available. # Issues: 20, 21, 26, 27, 12, 13, 18, 19
    `
      );
      registerTest(
        `Does not suggest any foxes with an unknown block pattern and no community data`,
        `
      ┌─────┬─────┬─────┬─────┬─────┬─────┐
      │ B   │ B   │ B   │ B   │ B   │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │ E   │     │ E   │     │ E   │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │ E   │     │ E   │     │ E   │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │     │     │ E   │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │ E   │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │ E   │     │     │     │     │     │
      └─────┴─────┴─────┴─────┴─────┴─────┘
    `,
        `
      ┌─────┬─────┬─────┬─────┬─────┬─────┐
      │ B   │ B   │ B   │ B   │ B   │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │ E   │     │ E   │     │ E   │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │ E   │     │ E   │     │ E   │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │     │     │ E   │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │>S   │     │     │ E   │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │ E   │     │     │     │     │     │
      └─────┴─────┴─────┴─────┴─────┴─────┘
      [Error] Blocked tile pattern does not match any known patterns. # Issues: 0, 1, 2, 3, 4
    `
      );
      registerTest(
        `Suggests foxes with community data`,
        `
      ┌─────┬─────┬─────┬─────┬─────┬─────┐
      │     │     │     │     │ B   │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │ B   │     │ E   │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │ B   │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │     │     │ E   │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │ B   │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │ B   │     │     │
      └─────┴─────┴─────┴─────┴─────┴─────┘
    `,
        `
        ID C
        ## 1
      ┌─────┬─────┬─────┬─────┬─────┬─────┐
      │     │?f  1│     │     │ B   │?f  1│
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │ B   │     │ E   │>P2  │  p  │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │?f  1│ B   │  p  │  p  │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │  s  │  s  │  s  │ E   │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │ B   │  s  │>S1  │  s  │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │?f  1│     │     │ B   │     │     │
      └─────┴─────┴─────┴─────┴─────┴─────┘
    `
      );
      registerTest(
        `No longer suggests foxes once a fox has been entered`,
        `
      ┌─────┬─────┬─────┬─────┬─────┬─────┐
      │     │     │     │     │ B   │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │ B   │     │ E   │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │ B   │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │     │     │ E   │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │ B   │     │     │     │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │ B   │     │     │
      └─────┴─────┴─────┴─────┴─────┴─────┘
    `,
        `
        ID C
        ## 1
      ┌─────┬─────┬─────┬─────┬─────┬─────┐
      │     │?f  1│     │     │ B   │?f  1│
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │ B   │     │ E   │>P2  │  p  │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │?f  1│ B   │  p  │  p  │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │  s  │  s  │  s  │ E   │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │ B   │  s  │>S1  │  s  │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │?f  1│     │     │ B   │     │     │
      └─────┴─────┴─────┴─────┴─────┴─────┘
    `,
        `
        ID C
        ## 1
      ┌─────┬─────┬─────┬─────┬─────┬─────┐
      │     │     │     │     │ B   │>F   │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │ B   │     │ E   │ P   │  p  │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │ B   │  p  │  p  │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │  s  │  s  │  s  │ E   │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │ B   │  s  │ S   │  s  │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │     │     │ B   │     │     │
      └─────┴─────┴─────┴─────┴─────┴─────┘
    `
      );
    });
    describe("Partially Solved board", () => {
      registerTest(
        "Does not suggest any foxes with no community data",
        `
    ┌─────┬─────┬─────┬─────┬─────┬─────┐
    │     │     │     │     │ B   │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │ B   │     │ E   │ E   │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │     │ B   │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │ E   │     │     │     │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │ B   │     │     │     │     │
    ├─────┼─────┼─────┼─────┼─────┼─────┤
    │     │     │     │ B   │     │     │
    └─────┴─────┴─────┴─────┴─────┴─────┘
  `,
        `
        ID C
        ## 0
  ┌─────┬─────┬─────┬─────┬─────┬─────┐
  │     │     │     │     │ B   │     │
  ├─────┼─────┼─────┼─────┼─────┼─────┤
  │     │ B   │     │ E   │ E   │     │
  ├─────┼─────┼─────┼─────┼─────┼─────┤
  │     │     │     │ B   │     │     │
  ├─────┼─────┼─────┼─────┼─────┼─────┤
  │ E   │     │     │     │     │     │
  ├─────┼─────┼─────┼─────┼─────┼─────┤
  │     │ B   │>S   │     │     │     │
  ├─────┼─────┼─────┼─────┼─────┼─────┤
  │     │     │     │ B   │     │     │
  └─────┴─────┴─────┴─────┴─────┴─────┘
  [Error] Tile pattern does not match any known patterns; suggestions are not available. # Issues: 26
`
      );
      registerTest(
        `Correctly detects Sword orientation for determining valid foxes (2x3)`,
        `
        ┌─────┬─────┬─────┬─────┬─────┬─────┐
        │     │     │     │     │     │     │
        ├─────┼─────┼─────┼─────┼─────┼─────┤
        │     │     │ B   │     │ B   │     │
        ├─────┼─────┼─────┼─────┼─────┼─────┤
        │     │ B   │     │ S   │     │     │
        ├─────┼─────┼─────┼─────┼─────┼─────┤
        │     │     │     │     │     │     │
        ├─────┼─────┼─────┼─────┼─────┼─────┤
        │     │     │ B   │     │ S   │     │
        ├─────┼─────┼─────┼─────┼─────┼─────┤
        │     │ E   │     │     │     │ B   │
        └─────┴─────┴─────┴─────┴─────┴─────┘
      `,
        `
        ID A
        ## 1
        ┌─────┬─────┬─────┬─────┬─────┬─────┐
        │     │     │     │     │     │     │
        ├─────┼─────┼─────┼─────┼─────┼─────┤
        │     │     │ B   │?f  1│ B   │     │
        ├─────┼─────┼─────┼─────┼─────┼─────┤
        │     │ B   │     │ S   │  s  │?f  1│
        ├─────┼─────┼─────┼─────┼─────┼─────┤
        │  p  │  p  │     │  s  │  s  │     │
        ├─────┼─────┼─────┼─────┼─────┼─────┤
        │>P   │  p  │ B   │  s  │ S   │     │
        ├─────┼─────┼─────┼─────┼─────┼─────┤
        │     │ E   │     │?f  1│?f  1│ B   │
        └─────┴─────┴─────┴─────┴─────┴─────┘
      `
      );
    });
    describe("Recommendation prioritization", () => {
      registerTest(
        `Other things equal, should prioritize spots that may have a fox`,
        `
        ┌─────┬─────┬─────┬─────┬─────┬─────┐
        │     │     │     │     │     │     │
        ├─────┼─────┼─────┼─────┼─────┼─────┤
        │     │ B   │ E   │     │ B   │     │
        ├─────┼─────┼─────┼─────┼─────┼─────┤
        │     │     │     │     │     │     │
        ├─────┼─────┼─────┼─────┼─────┼─────┤
        │ B   │     │     │ B   │     │     │
        ├─────┼─────┼─────┼─────┼─────┼─────┤
        │ S   │     │     │     │     │ B   │
        ├─────┼─────┼─────┼─────┼─────┼─────┤
        │     │     │ S   │     │     │     │
        └─────┴─────┴─────┴─────┴─────┴─────┘
      `,
        `
        ID C→
        ## 2
      ┌─────┬─────┬─────┬─────┬─────┬─────┐
      │.  1 │     │     │     │.  1 │     │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │ B   │ E   │     │ B   │.  1 │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │     │* 11 │. 1  │.  1 │. 1  │. 1  │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │ B   │. 1  │. 1  │ B   │. 1  │. 1  │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │ S   │  s  │  s  │     │.  1 │ B   │
      ├─────┼─────┼─────┼─────┼─────┼─────┤
      │  s  │  s  │ S   │.  1 │     │.  1 │
      └─────┴─────┴─────┴─────┴─────┴─────┘
    `
      );
    });
  });
};
